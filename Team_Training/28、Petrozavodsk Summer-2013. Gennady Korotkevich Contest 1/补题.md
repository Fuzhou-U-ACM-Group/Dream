# 补题

## I by yy

这题状态数应该是没法优化的，思考的时候有两个切入点，一个是优化转移，另一个就是正解：

考虑 $(x_1, y_1)$ 走到 $(x_2, y_2)$ ，如果先横着走再竖着走（这里的坐标系是从上到下 0 ~ n ，从左到右 0 ~ m ），花费是 $a_{x_1} \times (y_2 - y_1) + b_{y_2} \times (x_2 - x_1)$；如果先竖着走再横着走，花费是 $a_{x_2} \times (y_2 - y_1) + b_{y_1} \times (x_2 - x_1)$。

$a_{x_1} \times (y_2 - y_1) + b_{y_2} \times (x_2 - x_1) \le a_{x_2} \times (y_2 - y_1) + b_{y_1} \times (x_2 - x_1)$

$(a_{x_1} - a_{x_2}) \times (y_2 - y_1) \le (b_{y_1} - b_{y_2}) \times (x_2 - x_1)$

$\frac{(a_{x_1} - a_{x_2})}{(x_2 - x_1)} \le \frac{(b_{y_1} - b_{y_2})}{(y_2 - y_1)}$

也就是说，用 $(i, a_i)$ $(j, b_j)$ 形成两个下凸壳，从凸壳的最左边的点开始走，谁的斜率小就走谁，答案加上走的距离乘花费。

走凸壳的原因是因为：如果当前能走斜率小的，没必要走斜率大的。